<p id="notice"><%= notice %></p>

<div class="container">
  <div class="jumbotron">
    <h1>
      <%= @plant.name %>
    </h1>
  </div>
</div>


<h2>Friends</h2>
<ul>
  <% for friendship in @plant.friendships %>
    <li>
      <%=h friendship.friend.name %>
      <% if user_signed_in? %>
        <%= link_to 'Remove Friend', friendship_path(:friend_id => friendship.friend.id, :sich => 1), :method => :delete %>
      <% end %>
    </li>
  <% end %>

  <% for plant in @plant.inverse_friends %>
    <li>
      <%=h plant.name %>
    </li>
  <% end %>

</ul>

<h2>Enemies</h2>
<ul>
  <% for antagonism in @plant.antagonisms %>
    <li>
      <%=h antagonism.antagonist.name %>
      <% if user_signed_in? %>
        <%= link_to 'Remove Enemy', antagonism_path(:antagonist_id => antagonism.antagonist.id, :sich => 1), :method => :delete %>
      <% end %>
    </li>
  <% end %>

  <% for plant in @plant.inverse_antagonists %>
    <li>
      <%=h plant.name %>
    </li>
  <% end %>

</ul>



<h2>Plants</h2>
<ul>
  <% @potential_friends.each do |potential_friend| %>
    <% if (@plant.name != potential_friend.name) %>
      <% if (!@plant.friendships.exists?(:friend => potential_friend.id)) %>
        <% if (!@plant.antagonisms.exists?(:antagonist => potential_friend.id)) %>
          <% if (!@plant.inverse_antagonists.exists?(potential_friend.id)) %>
            <% if (!@plant.inverse_friends.exists?(potential_friend.id)) %>
              <li>
                <%= potential_friend.name %>
                <% if user_signed_in? %>
                  <%= link_to 'Add Friend', friendships_path(:plant => @plant, :friend => potential_friend.id), :method => :post %>
                  <%= link_to 'Add Antagonist', antagonisms_path(:plant => @plant, :antagonist => potential_friend.id), :method => :post %>
                <% end %>
              </li>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
</ul>


<%= link_to 'Edit', edit_plant_path(@plant) %> |
<%= link_to 'Back', plants_path %>
